# å¯¼å…¥å¯¼å‡ºåŠŸèƒ½è®¾è®¡

## æ ¸å¿ƒä»·å€¼

**çœŸå®éœ€æ±‚**ï¼š
1. æ¢ç”µè„‘æ—¶å¿«é€Ÿè¿ç§»é…ç½®
2. å›¢é˜Ÿæˆå‘˜åˆ†äº«é¢„ç½®æ¨¡æ¿ï¼ˆä¸å« API Keyï¼‰
3. å¤‡ä»½é…ç½®ï¼ˆå¯é€‰åŒ…å« API Keyï¼‰

**éç›®æ ‡**ï¼š
- âŒ ä¸åšäº‘åŒæ­¥ï¼ˆå¤æ‚åº¦é«˜ã€å®‰å…¨é£é™©ã€å†²çªå¤„ç†ï¼‰
- âŒ ä¸åšè‡ªåŠ¨å¤‡ä»½ï¼ˆTime Machine å·²åšï¼‰

## Linus çš„ä¸‰ä¸ªé—®é¢˜

### 1. "è¿™æ˜¯çœŸé—®é¢˜è¿˜æ˜¯è‡†æƒ³å‡ºæ¥çš„ï¼Ÿ"

**âœ… çœŸé—®é¢˜**ï¼š
- æ¢ç”µè„‘ï¼š10/10 ç”¨æˆ·éƒ½ä¼šé‡åˆ°
- å›¢é˜Ÿåˆ†äº«ï¼š7/10 å›¢é˜Ÿéœ€è¦ç»Ÿä¸€çš„é¢„ç½®é…ç½®
- å¤‡ä»½ï¼š5/10 ç”¨æˆ·å…³å¿ƒ

### 2. "æœ‰æ›´ç®€å•çš„æ–¹æ³•å—ï¼Ÿ"

**æ–¹æ¡ˆå¯¹æ¯”**ï¼š

| æ–¹æ¡ˆ | å¤æ‚åº¦ | å®‰å…¨æ€§ | ç”¨æˆ·ä½“éªŒ |
|------|--------|--------|----------|
| æ‰‹åŠ¨å¤åˆ¶ `~/.ccman/` | 0 è¡Œä»£ç  | âœ… å®‰å…¨ | âŒ Geek only |
| å¯¼å‡ºå¯¼å…¥ JSON | 200 è¡Œä»£ç  | âœ… å¯æ§ | âœ… å‹å¥½ |
| WebDAV äº‘åŒæ­¥ | 500 è¡Œä»£ç  | âŒ é£é™©é«˜ | âš ï¸ å¤æ‚ |

**ç»“è®º**: å¯¼å‡ºå¯¼å…¥æ˜¯æœ€ä½³å¹³è¡¡ç‚¹ã€‚

### 3. "ä¼šç ´åä»€ä¹ˆå—ï¼Ÿ"

**é£é™©**ï¼š
- API Key æ³„éœ²ï¼šå¦‚æœç”¨æˆ·å¯¼å‡ºæ—¶åŒ…å« API Key å¹¶åˆ†äº«æ–‡ä»¶
- é…ç½®è¦†ç›–ï¼šå¦‚æœå¯¼å…¥æ—¶è¦†ç›–äº†ç°æœ‰é…ç½®

**é˜²æŠ¤æªæ–½**ï¼š
- é»˜è®¤ä¸å¯¼å‡º API Keyï¼ˆæ˜ç¡®è­¦å‘Šï¼‰
- å¯¼å…¥å‰é¢„è§ˆï¼ˆæ˜¾ç¤ºå†²çªï¼‰
- å¤‡ä»½ç°æœ‰é…ç½®ï¼ˆåŸå­æ“ä½œï¼‰

## æ•°æ®ç»“æ„è®¾è®¡

### å¯¼å‡ºæ ¼å¼

```json
{
  "version": "3.0.2",
  "exportedAt": "2025-10-07T12:34:56Z",
  "includeApiKeys": false,
  "data": {
    "codex": {
      "current": "anthropic",
      "providers": [
        {
          "name": "anthropic",
          "baseUrl": "https://api.anthropic.com",
          "apiKey": "",  // å¦‚æœ includeApiKeys=falseï¼Œä¸ºç©ºå­—ç¬¦ä¸²
          "createdAt": 1234567890,
          "lastUsedAt": 1234567890
        }
      ],
      "presets": [
        {
          "name": "my-custom-preset",
          "baseUrl": "https://api.example.com",
          "description": "My custom preset"
        }
      ]
    },
    "claudecode": {
      "current": "openai",
      "providers": [ ... ],
      "presets": [ ... ]
    }
  }
}
```

**è®¾è®¡è¯´æ˜**ï¼š
- `version`: ç”¨äºå…¼å®¹æ€§æ£€æŸ¥ï¼ˆæœªæ¥æ ¼å¼å˜æ›´æ—¶ï¼‰
- `exportedAt`: æ—¶é—´æˆ³ï¼Œæ–¹ä¾¿ç”¨æˆ·è¯†åˆ«å¤‡ä»½ç‰ˆæœ¬
- `includeApiKeys`: æ˜ç¡®æ ‡è®°æ˜¯å¦åŒ…å«æ•æ„Ÿä¿¡æ¯
- `current`: ä½¿ç”¨ name è€Œä¸æ˜¯ IDï¼ˆID æ˜¯å†…éƒ¨æ ‡è¯†ï¼Œå¯¼å…¥åä¼šé‡æ–°ç”Ÿæˆï¼‰
- `apiKey`: å¦‚æœä¸å¯¼å‡ºï¼Œè®¾ä¸ºç©ºå­—ç¬¦ä¸²ï¼ˆè€Œä¸æ˜¯åˆ é™¤å­—æ®µï¼Œä¿æŒç»“æ„ä¸€è‡´ï¼‰

### å¯¼å…¥é€»è¾‘

```typescript
interface ImportOptions {
  merge: boolean         // åˆå¹¶æ¨¡å¼ï¼ˆtrueï¼‰æˆ–è¦†ç›–æ¨¡å¼ï¼ˆfalseï¼Œé»˜è®¤ï¼‰
  skipConflict: boolean  // è·³è¿‡åç§°å†²çªçš„ providerï¼ˆé»˜è®¤ falseï¼Œæç¤ºç”¨æˆ·ï¼‰
}

function importConfig(json: ExportData, options: ImportOptions) {
  // 1. ç‰ˆæœ¬å…¼å®¹æ€§æ£€æŸ¥
  if (json.version !== VERSION) {
    warn('ç‰ˆæœ¬ä¸åŒ¹é…ï¼Œå¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜')
  }

  // 2. å¤‡ä»½å½“å‰é…ç½®
  backupCurrentConfig()

  try {
    // 3. å¯¼å…¥ presetsï¼ˆåˆå¹¶ï¼Œä¸è¦†ç›–ç°æœ‰ï¼‰
    for (const tool of ['codex', 'claudecode']) {
      const manager = createManager(tool)
      const data = json.data[tool]

      // å¯¼å…¥ç”¨æˆ·é¢„ç½®
      for (const preset of data.presets) {
        if (!manager.listPresets().find(p => p.name === preset.name)) {
          manager.addPreset(preset)
        }
      }

      // å¯¼å…¥ providers
      for (const provider of data.providers) {
        // æ£€æŸ¥åç§°å†²çª
        const existing = manager.findByName(provider.name)
        if (existing) {
          if (options.skipConflict) {
            continue  // è·³è¿‡
          } else {
            // é‡å‘½å: "anthropic" â†’ "anthropic (imported)"
            provider.name = `${provider.name} (imported)`
          }
        }

        // å¦‚æœ apiKey ä¸ºç©ºï¼Œæç¤ºç”¨æˆ·ç¨åè¡¥å……
        if (!provider.apiKey) {
          provider.apiKey = 'PLEASE_SET_API_KEY'
        }

        manager.add(provider)
      }

      // æ¢å¤ currentï¼ˆæ ¹æ® name æŸ¥æ‰¾ï¼‰
      if (data.current) {
        const provider = manager.findByName(data.current)
        if (provider) {
          manager.switch(provider.id)
        }
      }
    }
  } catch (error) {
    // å›æ»š
    restoreBackup()
    throw error
  }
}
```

## CLI å‘½ä»¤è®¾è®¡

### å¯¼å‡ºå‘½ä»¤

```bash
ccman export [options]
```

**é€‰é¡¹**ï¼š
- `--output <file>`: è¾“å‡ºæ–‡ä»¶è·¯å¾„ï¼ˆé»˜è®¤ï¼š`./ccman-config-{timestamp}.json`ï¼‰
- `--include-api-keys`: åŒ…å« API Keyï¼ˆå±é™©ï¼Œé»˜è®¤ä¸åŒ…å«ï¼‰
- `--tool <tool>`: åªå¯¼å‡ºæŒ‡å®šå·¥å…·ï¼ˆ`codex` æˆ– `claudecode`ï¼‰

**ç¤ºä¾‹**ï¼š
```bash
# å¯¼å‡ºæ‰€æœ‰é…ç½®ï¼ˆä¸å« API Keyï¼‰
ccman export

# å¯¼å‡ºåˆ°æŒ‡å®šæ–‡ä»¶
ccman export --output ~/backup/ccman.json

# å¯¼å‡ºåŒ…å« API Keyï¼ˆå±é™©ï¼‰
ccman export --include-api-keys --output ~/private-backup.json

# åªå¯¼å‡º Codex é…ç½®
ccman export --tool codex
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
âœ… é…ç½®å·²å¯¼å‡ºåˆ°: /Users/you/ccman-config-2025-10-07.json

ğŸ“Š å¯¼å‡ºå†…å®¹ï¼š
  Codex:
    - 3 ä¸ªæœåŠ¡å•†
    - 2 ä¸ªè‡ªå®šä¹‰é¢„ç½®
    - å½“å‰ä½¿ç”¨: anthropic
  Claude Code:
    - 2 ä¸ªæœåŠ¡å•†
    - 1 ä¸ªè‡ªå®šä¹‰é¢„ç½®
    - å½“å‰ä½¿ç”¨: openai

âš ï¸  API Key æœªåŒ…å«åœ¨å¯¼å‡ºæ–‡ä»¶ä¸­ï¼ˆå®‰å…¨ï¼‰
ğŸ’¡ å¦‚éœ€åŒ…å« API Keyï¼Œä½¿ç”¨ --include-api-keys é€‰é¡¹
```

### å¯¼å…¥å‘½ä»¤

```bash
ccman import <file> [options]
```

**é€‰é¡¹**ï¼š
- `--merge`: åˆå¹¶æ¨¡å¼ï¼ˆä¿ç•™ç°æœ‰é…ç½®ï¼Œåªæ·»åŠ æ–°çš„ï¼‰
- `--skip-conflict`: è·³è¿‡åç§°å†²çªçš„ providerï¼ˆé»˜è®¤ï¼šé‡å‘½åä¸º "name (imported)"ï¼‰

**ç¤ºä¾‹**ï¼š
```bash
# å¯¼å…¥é…ç½®ï¼ˆè¦†ç›–æ¨¡å¼ï¼‰
ccman import ccman-config.json

# åˆå¹¶æ¨¡å¼
ccman import ccman-config.json --merge

# è·³è¿‡å†²çª
ccman import ccman-config.json --skip-conflict
```

**äº¤äº’æµç¨‹**ï¼š
```
ğŸ“‚ è¯»å–å¯¼å…¥æ–‡ä»¶: ccman-config.json

ğŸ“Š å¯¼å…¥é¢„è§ˆï¼š
  âœ… Codex:
    - å°†æ·»åŠ  2 ä¸ªæœåŠ¡å•† (anthropic, openai)
    - âš ï¸  åç§°å†²çª: anthropicï¼ˆå°†é‡å‘½åä¸º "anthropic (imported)"ï¼‰
    - å°†æ·»åŠ  1 ä¸ªé¢„ç½® (my-preset)
    - âš ï¸  3 ä¸ªæœåŠ¡å•†çš„ API Key ä¸ºç©ºï¼ˆéœ€è¦ç¨åè¡¥å……ï¼‰
  âœ… Claude Code:
    - å°†æ·»åŠ  1 ä¸ªæœåŠ¡å•† (azure)

â“ ç¡®è®¤å¯¼å…¥ï¼Ÿ(y/N): y

âœ… å¯¼å…¥æˆåŠŸï¼

âš ï¸  ä»¥ä¸‹æœåŠ¡å•†çš„ API Key ä¸ºç©ºï¼Œè¯·ä½¿ç”¨ edit å‘½ä»¤è¡¥å……ï¼š
  - Codex: anthropic, openai, azure
  - Claude Code: azure

ğŸ’¡ è¡¥å…… API Keyï¼š
  ccman cx edit anthropic
  ccman cc edit azure
```

## Desktop UI è®¾è®¡

### è®¾ç½®é¡µé¢

**ä½ç½®**: ä¸»ç•Œé¢ â†’ è®¾ç½® â†’ æ•°æ®ç®¡ç†

**å¸ƒå±€**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ•°æ®ç®¡ç†                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  å¯¼å‡ºé…ç½®                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“¤ å¯¼å‡ºé…ç½®åˆ°æ–‡ä»¶              â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚ å°†æ‚¨çš„æœåŠ¡å•†é…ç½®å¯¼å‡ºä¸º JSON    â”‚  â”‚
â”‚  â”‚ æ–‡ä»¶ï¼Œç”¨äºå¤‡ä»½æˆ–è¿ç§»åˆ°æ–°è®¾å¤‡ã€‚  â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚  [ å¯¼å‡ºé…ç½® ]                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  å¯¼å…¥é…ç½®                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“¥ ä»æ–‡ä»¶å¯¼å…¥é…ç½®              â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚ ä»å¯¼å‡ºçš„ JSON æ–‡ä»¶æ¢å¤é…ç½®ã€‚   â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚  [ å¯¼å…¥é…ç½® ]                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¯¼å‡ºå¯¹è¯æ¡†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¯¼å‡ºé…ç½®                     [ X ]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  ä¿å­˜ä½ç½®:                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ~/ccman-config-2025-10-07.jsonâ”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   [ é€‰æ‹©æ–‡ä»¶... ]                   â”‚
â”‚                                     â”‚
â”‚  é€‰é¡¹:                               â”‚
â”‚  â˜ åŒ…å« API Key                     â”‚
â”‚     âš ï¸  å°†ä»¥æ˜æ–‡å½¢å¼å¯¼å‡º API Key    â”‚
â”‚        ä»…ç”¨äºä¸ªäººå¤‡ä»½ï¼Œè¯·å‹¿åˆ†äº«æ–‡ä»¶  â”‚
â”‚                                     â”‚
â”‚  â˜ åªå¯¼å‡º Codex                     â”‚
â”‚  â˜ åªå¯¼å‡º Claude Code               â”‚
â”‚                                     â”‚
â”‚              [ å–æ¶ˆ ]  [ å¯¼å‡º ]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¯¼å…¥å¯¹è¯æ¡†

**Step 1: é€‰æ‹©æ–‡ä»¶**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¯¼å…¥é…ç½®                     [ X ]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  é€‰æ‹©é…ç½®æ–‡ä»¶:                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ~/ccman-config.json           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   [ é€‰æ‹©æ–‡ä»¶... ]                   â”‚
â”‚                                     â”‚
â”‚              [ å–æ¶ˆ ]  [ ä¸‹ä¸€æ­¥ ]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Step 2: é¢„è§ˆï¼ˆæ˜¾ç¤ºå†²çªï¼‰**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¯¼å…¥é…ç½® - é¢„è§ˆ              [ X ]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  ğŸ“Š å°†å¯¼å…¥ä»¥ä¸‹å†…å®¹ï¼š                 â”‚
â”‚                                     â”‚
â”‚  âœ… Codex (2 ä¸ªæœåŠ¡å•†, 1 ä¸ªé¢„ç½®)     â”‚
â”‚    - anthropic                      â”‚
â”‚    - openai                         â”‚
â”‚    - my-custom-preset (é¢„ç½®)        â”‚
â”‚                                     â”‚
â”‚  âš ï¸  å†²çªï¼š                          â”‚
â”‚    - "anthropic" å·²å­˜åœ¨             â”‚
â”‚      â†’ å°†é‡å‘½åä¸º "anthropic (imported)" â”‚
â”‚                                     â”‚
â”‚  âš ï¸  ä»¥ä¸‹æœåŠ¡å•†çš„ API Key ä¸ºç©ºï¼š      â”‚
â”‚    - anthropic                      â”‚
â”‚    - openai                         â”‚
â”‚    å¯¼å…¥åéœ€è¦æ‰‹åŠ¨è¡¥å…… API Key        â”‚
â”‚                                     â”‚
â”‚  å¯¼å…¥æ¨¡å¼:                           â”‚
â”‚  â—‹ è¦†ç›–æ¨¡å¼ï¼ˆæ¸…ç©ºç°æœ‰é…ç½®ï¼‰          â”‚
â”‚  â— åˆå¹¶æ¨¡å¼ï¼ˆä¿ç•™ç°æœ‰é…ç½®ï¼‰          â”‚
â”‚                                     â”‚
â”‚              [ å–æ¶ˆ ]  [ å¯¼å…¥ ]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Step 3: æˆåŠŸæç¤º**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¯¼å…¥æˆåŠŸ                     [ X ]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  âœ… é…ç½®å·²æˆåŠŸå¯¼å…¥ï¼                 â”‚
â”‚                                     â”‚
â”‚  âš ï¸  ä»¥ä¸‹æœåŠ¡å•†éœ€è¦è¡¥å…… API Keyï¼š     â”‚
â”‚                                     â”‚
â”‚  Codex:                             â”‚
â”‚    - anthropic                      â”‚
â”‚    - openai                         â”‚
â”‚                                     â”‚
â”‚  Claude Code:                       â”‚
â”‚    - azure                          â”‚
â”‚                                     â”‚
â”‚  è¯·å‰å¾€å¯¹åº”é¡µé¢ç¼–è¾‘æœåŠ¡å•†ä»¥è¡¥å…… API Keyã€‚ â”‚
â”‚                                     â”‚
â”‚                   [ çŸ¥é“äº† ]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å®ç°è®¡åˆ’

### Phase 1: Core æ¨¡å—ï¼ˆä¼˜å…ˆï¼‰

**æ–‡ä»¶**: `packages/core/src/export-import.ts`

```typescript
// å¯¼å‡ºåŠŸèƒ½
export interface ExportOptions {
  includeApiKeys: boolean
  tools?: ('codex' | 'claudecode')[]
}

export function exportConfig(options: ExportOptions): ExportData {
  // å®ç°å¯¼å‡ºé€»è¾‘
}

// å¯¼å…¥åŠŸèƒ½
export interface ImportOptions {
  merge: boolean
  skipConflict: boolean
}

export function importConfig(data: ExportData, options: ImportOptions): ImportResult {
  // å®ç°å¯¼å…¥é€»è¾‘
}

// å¯¼å…¥ç»“æœ
export interface ImportResult {
  success: boolean
  added: {
    codex: { providers: number, presets: number }
    claudecode: { providers: number, presets: number }
  }
  conflicts: Array<{ tool: string, name: string, action: 'renamed' | 'skipped' }>
  missingApiKeys: Array<{ tool: string, name: string }>
}
```

**ä»£ç é‡**: ~150 è¡Œ

**æµ‹è¯•**: `packages/core/src/export-import.test.ts` ~100 è¡Œ

### Phase 2: CLI å‘½ä»¤

**æ–‡ä»¶**:
- `packages/cli/src/commands/export.ts` ~30 è¡Œ
- `packages/cli/src/commands/import.ts` ~50 è¡Œ

**ä»£ç é‡**: ~80 è¡Œ

### Phase 3: Desktop UI

**æ–‡ä»¶**:
- `packages/desktop/src/pages/Settings.tsx` - æ·»åŠ æ•°æ®ç®¡ç†åŒºåŸŸ
- `packages/desktop/src/components/ExportDialog.tsx` ~50 è¡Œ
- `packages/desktop/src/components/ImportDialog.tsx` ~100 è¡Œ

**ä»£ç é‡**: ~150 è¡Œ

**æ€»è®¡**: ~480 è¡Œï¼ˆåŒ…å«æµ‹è¯•ï¼‰

## å®‰å…¨æ€§è®¾è®¡

### API Key ä¿æŠ¤

1. **é»˜è®¤ä¸å¯¼å‡º**ï¼š
   - `includeApiKeys` é»˜è®¤ä¸º `false`
   - CLI å’Œ Desktop éƒ½éœ€è¦æ˜ç¡®å‹¾é€‰æ‰å¯¼å‡º

2. **æ˜ç¡®è­¦å‘Š**ï¼š
   ```
   âš ï¸  å±é™©æ“ä½œï¼šåŒ…å« API Key

   å¯¼å‡ºçš„æ–‡ä»¶å°†åŒ…å«æ‚¨çš„ API å¯†é’¥ï¼Œä»»ä½•è·å–æ­¤æ–‡ä»¶çš„äºº
   éƒ½å¯ä»¥ä½¿ç”¨æ‚¨çš„ API é…é¢ã€‚

   âœ… æ¨èï¼šä¸åŒ…å« API Keyï¼ˆç”¨äºå›¢é˜Ÿåˆ†äº«é…ç½®æ¨¡æ¿ï¼‰
   âŒ å±é™©ï¼šåŒ…å« API Keyï¼ˆä»…ç”¨äºä¸ªäººå¤‡ä»½ï¼Œè¯·å¦¥å–„ä¿ç®¡ï¼‰

   ç¡®è®¤è¦åŒ…å« API Key å—ï¼Ÿ(y/N):
   ```

3. **æ–‡ä»¶æƒé™**ï¼š
   - å¯¼å‡ºçš„æ–‡ä»¶è‡ªåŠ¨è®¾ç½®ä¸º `0600`ï¼ˆåªæœ‰æ‰€æœ‰è€…å¯è¯»å†™ï¼‰

### å¯¼å…¥ä¿æŠ¤

1. **å¤‡ä»½ç°æœ‰é…ç½®**ï¼š
   - å¯¼å…¥å‰è‡ªåŠ¨å¤‡ä»½åˆ° `~/.ccman/backup/`
   - å¤±è´¥æ—¶è‡ªåŠ¨å›æ»š

2. **åŸå­æ“ä½œ**ï¼š
   - å…ˆå†™å…¥ä¸´æ—¶æ–‡ä»¶
   - éªŒè¯æ— è¯¯å renameï¼ˆåŸå­æ“ä½œï¼‰
   - å¤±è´¥æ—¶è‡ªåŠ¨æ¸…ç†

3. **é¢„è§ˆç¡®è®¤**ï¼š
   - æ˜¾ç¤ºæ‰€æœ‰å°†è¦æ”¹å˜çš„å†…å®¹
   - æ˜¾ç¤ºå†²çªå’Œç¼ºå¤±çš„ API Key
   - ç”¨æˆ·ç¡®è®¤åæ‰æ‰§è¡Œ

## æµ‹è¯•è®¡åˆ’

### å•å…ƒæµ‹è¯•

1. **exportConfig()**:
   - ä¸åŒ…å« API Key
   - åŒ…å« API Key
   - åªå¯¼å‡º Codex
   - åªå¯¼å‡º Claude Code
   - ç©ºé…ç½®

2. **importConfig()**:
   - è¦†ç›–æ¨¡å¼
   - åˆå¹¶æ¨¡å¼
   - åç§°å†²çªå¤„ç†
   - ç¼ºå¤± API Key
   - ç‰ˆæœ¬ä¸åŒ¹é…
   - æ ¼å¼é”™è¯¯

### é›†æˆæµ‹è¯•

1. å¯¼å‡º â†’ å¯¼å…¥ï¼ˆå®Œæ•´æµç¨‹ï¼‰
2. å¯¼å‡º â†’ ç¼–è¾‘ JSON â†’ å¯¼å…¥
3. å¯¼å…¥å current æ¢å¤
4. å¯¼å…¥å presets åˆå¹¶
5. åç§°å†²çªé‡å‘½å

### æ‰‹åŠ¨æµ‹è¯•

1. Desktop å¯¼å‡ºå¯¹è¯æ¡†
2. Desktop å¯¼å…¥å¯¹è¯æ¡†
3. CLI å‘½ä»¤äº¤äº’
4. æ–‡ä»¶æƒé™æ£€æŸ¥

## å…¼å®¹æ€§è®¾è®¡

### ç‰ˆæœ¬æ£€æŸ¥

```typescript
function checkVersion(exportVersion: string): CompatibilityResult {
  const [major, minor, patch] = exportVersion.split('.').map(Number)
  const [currentMajor, currentMinor] = VERSION.split('.').map(Number)

  if (major < currentMajor) {
    return { compatible: true, warning: 'å¯¼å‡ºç‰ˆæœ¬è¾ƒæ—§ï¼Œå·²è‡ªåŠ¨å‡çº§æ ¼å¼' }
  }

  if (major > currentMajor) {
    return { compatible: false, error: 'å¯¼å‡ºç‰ˆæœ¬å¤ªæ–°ï¼Œè¯·å‡çº§ ccman' }
  }

  return { compatible: true }
}
```

### æ ¼å¼è¿ç§»

å¦‚æœæœªæ¥é…ç½®æ ¼å¼å˜æ›´ï¼Œåœ¨å¯¼å…¥æ—¶è‡ªåŠ¨è¿ç§»ï¼š

```typescript
function migrateFormat(data: ExportData): ExportData {
  // 3.0.x â†’ 3.1.x: æ·»åŠ æ–°å­—æ®µ
  if (!data.data.codex.settings) {
    data.data.codex.settings = {}
  }

  // 3.1.x â†’ 4.0.x: é‡å¤§å˜æ›´
  // ...

  return data
}
```

## æ–‡æ¡£æ¸…å•

- [x] `docs/å¯¼å…¥å¯¼å‡ºè®¾è®¡.md` - æœ¬æ–‡æ¡£
- [ ] `README.md` - æ·»åŠ å¯¼å…¥å¯¼å‡ºä½¿ç”¨è¯´æ˜
- [ ] `docs/åŠŸèƒ½æ¸…å•.md` - æ›´æ–°åŠŸèƒ½åˆ—è¡¨
- [ ] `docs/æŠ€æœ¯æ¶æ„.md` - æ›´æ–°æ¶æ„å›¾

## å¼€å‘æ—¶é—´è¡¨

| é˜¶æ®µ | ä»»åŠ¡ | å·¥ä½œé‡ | è´Ÿè´£äºº |
|------|------|--------|--------|
| Week 1 | Core æ¨¡å—å®ç° + æµ‹è¯• | 2 å¤© | - |
| Week 2 | CLI å‘½ä»¤å®ç° | 1 å¤© | - |
| Week 2 | Desktop UI å®ç° | 2 å¤© | - |
| Week 3 | é›†æˆæµ‹è¯• + æ–‡æ¡£ | 1 å¤© | - |

**æ€»è®¡**: 6 å¤©

## FAQ

### Q: ä¸ºä»€ä¹ˆä¸åš WebDAV äº‘åŒæ­¥ï¼Ÿ

**A**:
1. è§£å†³ä¸å­˜åœ¨çš„é—®é¢˜ï¼ˆ< 5% ç”¨æˆ·éœ€è¦ï¼‰
2. å®‰å…¨é£é™©é«˜ï¼ˆAPI Key å­˜å‚¨åœ¨äº‘ç«¯ï¼‰
3. å¤æ‚åº¦é«˜ï¼ˆéœ€è¦å¤„ç†å†²çªã€è®¤è¯ã€ç½‘ç»œé”™è¯¯ï¼‰
4. å¯¼å‡ºå¯¼å…¥å·²ç»è§£å†³äº†çœŸå®é—®é¢˜

Linus: "This is solving a non-existent problem."

### Q: å¯¼å‡ºæ ¼å¼ä¸ºä»€ä¹ˆç”¨ JSON è€Œä¸æ˜¯ YAMLï¼Ÿ

**A**:
- JSON é›¶ä¾èµ–ã€æ ‡å‡†åŒ–ã€å¯ç¼–ç¨‹
- YAML éœ€è¦ä¾èµ–åº“ã€ç¼©è¿›åœ°ç‹±
- ç”¨æˆ·ä¸éœ€è¦æ‰‹åŠ¨ç¼–è¾‘å¯¼å‡ºæ–‡ä»¶

### Q: ä¸ºä»€ä¹ˆä¸è‡ªåŠ¨å¤‡ä»½é…ç½®ï¼Ÿ

**A**:
- macOS æœ‰ Time Machine
- Linux/Windows ç”¨æˆ·å¯ä»¥ç”¨ rsync/robocopy
- è‡ªåŠ¨å¤‡ä»½ = å¤æ‚åº¦å¢åŠ ï¼ˆå¤‡ä»½é¢‘ç‡ã€ä¿ç•™ç­–ç•¥ã€æ¸…ç†ï¼‰
- YAGNI: ç”¨æˆ·çœŸéœ€è¦æ—¶ä¼šä¸»åŠ¨å¯¼å‡º

### Q: current ä¸ºä»€ä¹ˆå¯¼å‡ºä¸º name è€Œä¸æ˜¯ IDï¼Ÿ

**A**:
- ID æ˜¯å†…éƒ¨æ ‡è¯†ï¼Œå¯¼å…¥åä¼šé‡æ–°ç”Ÿæˆ
- name æ˜¯ç”¨æˆ·å¯è§çš„æ ‡è¯†ï¼Œæ›´ç¨³å®š
- å¦‚æœå¯¼å…¥åæ‰¾ä¸åˆ°å¯¹åº” nameï¼Œä¸è®¾ç½® currentï¼ˆç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©ï¼‰

### Q: ä¸ºä»€ä¹ˆè¦è­¦å‘ŠåŒ…å« API Keyï¼Ÿ

**A**:
- API Key æ˜¯æ•æ„Ÿä¿¡æ¯ï¼Œæ³„éœ²ä¼šå¯¼è‡´è´¹ç”¨æŸå¤±
- å¤§å¤šæ•°ç”¨æˆ·åœºæ™¯ï¼ˆå›¢é˜Ÿåˆ†äº«ï¼‰ä¸éœ€è¦ API Key
- æ˜ç¡®è­¦å‘Šå¯ä»¥é˜²æ­¢ç”¨æˆ·è¯¯æ“ä½œ
