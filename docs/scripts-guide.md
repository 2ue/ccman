# Scripts ä½¿ç”¨æŒ‡å—

é¡¹ç›®æä¾›äº†å¤šä¸ªå‘å¸ƒå’Œç®¡ç†è„šæœ¬ï¼Œä½äº `./scripts/` ç›®å½•ä¸‹ã€‚è¿™äº›è„šæœ¬æä¾›äº†æ¯”npm scriptsæ›´å¼ºå¤§å’Œçµæ´»çš„åŠŸèƒ½ã€‚

## ğŸ“‚ Scripts ç›®å½•ç»“æ„

```
scripts/
â”œâ”€â”€ release.sh          # å®Œæ•´å‘å¸ƒæµç¨‹ï¼ˆæ¨èç”¨äºé‡è¦ç‰ˆæœ¬ï¼‰
â”œâ”€â”€ quick-release.sh     # å¿«é€Ÿå‘å¸ƒæµç¨‹ï¼ˆæ—¥å¸¸å¼€å‘æ¨èï¼‰
â””â”€â”€ publish-local.sh     # æœ¬åœ°å‘å¸ƒè„šæœ¬ï¼ˆè°ƒè¯•ç”¨ï¼‰
```

## ğŸš€ å‘å¸ƒè„šæœ¬è¯¦è§£

### 1. `quick-release.sh` - å¿«é€Ÿå‘å¸ƒï¼ˆæ¨èï¼‰

**é€‚ç”¨åœºæ™¯**: æ—¥å¸¸å¼€å‘ä¸­çš„å°ç‰ˆæœ¬å‘å¸ƒ

**ç‰¹ç‚¹**:
- ç®€å•é«˜æ•ˆï¼Œä¸€é”®å‘å¸ƒ
- è‡ªåŠ¨æ„å»ºã€æµ‹è¯•ã€ç‰ˆæœ¬ç®¡ç†
- æ”¯æŒpatch/minor/majorç‰ˆæœ¬å‡çº§
- ç›´æ¥åœ¨ä¸»åˆ†æ”¯æ“ä½œ

**ä½¿ç”¨æ–¹æ³•**:
```bash
# äº¤äº’å¼é€‰æ‹©ç‰ˆæœ¬ç±»å‹
./scripts/quick-release.sh

# ç›´æ¥æŒ‡å®šç‰ˆæœ¬ç±»å‹  
./scripts/quick-release.sh patch   # ä¿®è®¢ç‰ˆæœ¬ 0.0.3 â†’ 0.0.4
./scripts/quick-release.sh minor   # æ¬¡ç‰ˆæœ¬   0.0.3 â†’ 0.1.0
./scripts/quick-release.sh major   # ä¸»ç‰ˆæœ¬   0.0.3 â†’ 1.0.0
```

**æ‰§è¡Œæµç¨‹**:
1. âœ… æ£€æŸ¥å·¥ä½œç›®å½•çŠ¶æ€
2. ğŸ”§ è¿è¡Œæ„å»ºå’Œä»£ç æ£€æŸ¥
3. ğŸ“ æ›´æ–°ç‰ˆæœ¬å·
4. ğŸ“¤ åˆ›å»ºæäº¤å’Œæ ‡ç­¾
5. ğŸš€ æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œè§¦å‘GitHub Actions

### 2. `release.sh` - å®Œæ•´å‘å¸ƒæµç¨‹

**é€‚ç”¨åœºæ™¯**: é‡è¦ç‰ˆæœ¬å‘å¸ƒï¼Œéœ€è¦è¯¦ç»†ç®¡ç†å’Œè®°å½•

**ç‰¹ç‚¹**:
- åˆ›å»ºä¸“ç”¨çš„releaseåˆ†æ”¯
- æ™ºèƒ½ç‰ˆæœ¬å»ºè®®ï¼ˆåŸºäºgitæäº¤åˆ†æï¼‰
- ç”Ÿæˆè¯¦ç»†çš„changelog
- æ”¯æŒè‡ªå®šä¹‰ç‰ˆæœ¬å·å’Œé¢„å‘å¸ƒç‰ˆæœ¬
- æ›´ä¸¥æ ¼çš„æ£€æŸ¥å’Œç¡®è®¤æµç¨‹

**ä½¿ç”¨æ–¹æ³•**:
```bash
# å¯åŠ¨å®Œæ•´å‘å¸ƒæµç¨‹
./scripts/release.sh
```

**ç‰ˆæœ¬é€‰æ‹©**:
- **patch (ä¿®è®¢ç‰ˆæœ¬)** - bugä¿®å¤ã€å°æ”¹è¿›
- **minor (æ¬¡ç‰ˆæœ¬)** - æ–°åŠŸèƒ½ã€å‘åå…¼å®¹æ”¹åŠ¨
- **major (ä¸»ç‰ˆæœ¬)** - ç ´åæ€§æ›´æ”¹ã€é‡å¤§é‡æ„  
- **prerelease (é¢„å‘å¸ƒ)** - æµ‹è¯•ç‰ˆæœ¬ã€betaç‰ˆæœ¬
- **custom (è‡ªå®šä¹‰)** - æ‰‹åŠ¨æŒ‡å®šç‰ˆæœ¬å·

**æ™ºèƒ½ç‰ˆæœ¬å»ºè®®**:
è„šæœ¬ä¼šåˆ†ææœ€è¿‘çš„gitæäº¤ï¼Œæ™ºèƒ½æ¨èåˆé€‚çš„ç‰ˆæœ¬ç±»å‹ï¼š
- æ£€æµ‹åˆ° "breaking"/"major" â†’ æ¨è major
- æ£€æµ‹åˆ° "feat"/"feature"/"add" â†’ æ¨è minor  
- å…¶ä»–æƒ…å†µ â†’ æ¨è patch

### 3. `publish-local.sh` - æœ¬åœ°å‘å¸ƒ

**é€‚ç”¨åœºæ™¯**: è°ƒè¯•å‘å¸ƒæµç¨‹ï¼Œæˆ–GitHub Actionsä¸å¯ç”¨æ—¶

**ä½¿ç”¨æ–¹æ³•**:
```bash
./scripts/publish-local.sh
```

## ğŸ†š Scripts vs NPM Scripts å¯¹æ¯”

| ç‰¹æ€§ | Scriptsç›®å½• | NPM Scripts |
|------|-------------|-------------|
| **åŠŸèƒ½** | å®Œæ•´å‘å¸ƒæµç¨‹ | å•ä¸€å‘½ä»¤ |
| **äº¤äº’æ€§** | ä¸°å¯Œçš„äº¤äº’æç¤º | åŸºæœ¬æ‰§è¡Œ |
| **é”™è¯¯å¤„ç†** | è¯¦ç»†æ£€æŸ¥å’Œæç¤º | åŸºæœ¬é”™è¯¯ |
| **ç‰ˆæœ¬ç®¡ç†** | æ™ºèƒ½æ¨èå’ŒéªŒè¯ | éœ€æ‰‹åŠ¨æŒ‡å®š |
| **åˆ†æ”¯ç®¡ç†** | æ”¯æŒreleaseåˆ†æ”¯ | ä»…ä¸»åˆ†æ”¯ |
| **æ—¥å¿—è®°å½•** | è‡ªåŠ¨ç”Ÿæˆchangelog | æ—  |

## ğŸ”§ NPM Scripts å¿«æ·æ–¹å¼

åœ¨package.jsonä¸­å·²é…ç½®çš„å¿«æ·æ–¹å¼ï¼š

```bash
# ç­‰ä»·äº ./scripts/release.sh
pnpm run release

# ç­‰ä»·äº ./scripts/quick-release.sh
pnpm run release:interactive  

# ç­‰ä»·äº ./scripts/quick-release.sh patch/minor/major
pnpm run release:patch
pnpm run release:minor  
pnpm run release:major

# ç­‰ä»·äº ./scripts/publish-local.sh
pnpm run publish:local
```

## ğŸ“‹ ä½¿ç”¨å»ºè®®

### æ—¥å¸¸å¼€å‘æ¨èæµç¨‹:

```bash
# 1. æ—¥å¸¸ä¿®å¤å’Œå°æ”¹è¿›
./scripts/quick-release.sh patch

# 2. æ–°åŠŸèƒ½å‘å¸ƒ
./scripts/quick-release.sh minor

# 3. é‡å¤§ç‰ˆæœ¬å‘å¸ƒ
./scripts/release.sh
```

### é¦–æ¬¡ä½¿ç”¨:

```bash
# 1. ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
chmod +x scripts/*.sh

# 2. æµ‹è¯•è„šæœ¬ï¼ˆä¼šæ£€æŸ¥ç¯å¢ƒä½†ä¸æ‰§è¡Œå‘å¸ƒï¼‰
./scripts/quick-release.sh --help || echo "è„šæœ¬æ­£å¸¸"

# 3. æ‰§è¡Œç¬¬ä¸€æ¬¡å‘å¸ƒ
./scripts/quick-release.sh patch
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. å‰ç½®æ¡ä»¶
- âœ… å·¥ä½œç›®å½•å¿…é¡»å¹²å‡€ï¼ˆæ— æœªæäº¤æ›´æ”¹ï¼‰
- âœ… å¿…é¡»åœ¨gitä»“åº“ä¸­
- âœ… NPM_TOKENå·²åœ¨GitHub Secretsä¸­è®¾ç½®
- âœ… å¿…é¡»å®‰è£…ï¼šgit, node, pnpm

### 2. è„šæœ¬ç‰¹æ€§
- **è‡ªåŠ¨æ„å»º**: å‘å¸ƒå‰è‡ªåŠ¨è¿è¡Œ`pnpm run build`å’Œ`pnpm run lint`
- **ç‰ˆæœ¬éªŒè¯**: é˜²æ­¢é‡å¤ç‰ˆæœ¬å·
- **è‡ªåŠ¨æ¨é€**: åˆ›å»ºtagåè‡ªåŠ¨æ¨é€è§¦å‘GitHub Actions
- **é”™è¯¯ä¿æŠ¤**: é‡åˆ°é”™è¯¯ä¼šç«‹å³åœæ­¢

### 3. æ•…éšœæ’æŸ¥

```bash
# å¦‚æœè„šæœ¬æ‰§è¡Œå¤±è´¥ï¼Œæ£€æŸ¥ï¼š
1. git status                    # ç¡®ä¿å·¥ä½œç›®å½•å¹²å‡€
2. pnpm run build               # ç¡®ä¿æ„å»ºæˆåŠŸ  
3. pnpm run lint                # ç¡®ä¿ä»£ç æ£€æŸ¥é€šè¿‡
4. git log --oneline -5         # æ£€æŸ¥æœ€è¿‘æäº¤è®°å½•
```

## ğŸ¯ æœ€ä½³å®è·µ

1. **æ—¥å¸¸ä½¿ç”¨**: ä¼˜å…ˆä½¿ç”¨`quick-release.sh`ï¼Œç®€å•é«˜æ•ˆ
2. **é‡è¦ç‰ˆæœ¬**: ä½¿ç”¨`release.sh`ï¼Œå®Œæ•´æµç¨‹å’Œè®°å½•
3. **ç‰ˆæœ¬è§„åˆ’**: éµå¾ª[è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/lang/zh-CN/)è§„èŒƒ
4. **æäº¤è§„èŒƒ**: ä½¿ç”¨[çº¦å®šå¼æäº¤](https://www.conventionalcommits.org/zh-hans/)æ ¼å¼
5. **å‘å¸ƒéªŒè¯**: å‘å¸ƒååŠæ—¶æ£€æŸ¥GitHub Actionså’ŒNPMåŒ…

---

ğŸ’¡ **æç¤º**: æ¨èå°†`./scripts/quick-release.sh`åŠ å…¥ä½ çš„å¼€å‘å·¥ä½œæµï¼Œä¸€é”®å®Œæˆç‰ˆæœ¬å‘å¸ƒï¼