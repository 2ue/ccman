# Desktop æ¸…ç†åŠŸèƒ½ - 5ä¸ªæ ¸å¿ƒç»„ä»¶è¯¦è§£

## ç»„ä»¶æ¦‚è§ˆ

è¿™5ä¸ªç»„ä»¶æ„æˆäº† Desktop æ¸…ç†åŠŸèƒ½çš„å®Œæ•´ UIï¼Œæ¯ä¸ªç»„ä»¶èŒè´£å•ä¸€ã€åŠŸèƒ½æ˜ç¡®ã€‚

```
é¡µé¢å¸ƒå±€ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â‘  CleanAnalysisCard  â”‚  â‘¡ CleanVisualization â”‚
â”‚  (åˆ†æå¡ç‰‡)            â”‚  (å¯è§†åŒ–å›¾è¡¨)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â‘¢ CleanConfigForm                  â”‚
â”‚          (æ¸…ç†é…ç½®è¡¨å•)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â‘¤ BackupManager (å¯é€‰)             â”‚
â”‚          (å¤‡ä»½ç®¡ç†)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¼¹çª—ï¼š
  â‘£ CleanResultModal (ç»“æœå¼¹çª—)
```

---

## â‘  CleanAnalysisCard - åˆ†æå¡ç‰‡

### åŠŸèƒ½å®šä½
**"ä¿¡æ¯ä»ªè¡¨ç›˜"** - å±•ç¤º ~/.claude.json æ–‡ä»¶çš„æ ¸å¿ƒç»Ÿè®¡ä¿¡æ¯

### æ ¸å¿ƒèŒè´£
1. **æ•°æ®è·å–**ï¼šè°ƒç”¨ `window.electronAPI.clean.analyze()` è·å–åˆ†ææ•°æ®
2. **ä¿¡æ¯å±•ç¤º**ï¼šä»¥å¡ç‰‡å½¢å¼å±•ç¤ºå…³é”®æŒ‡æ ‡
3. **åˆ·æ–°åŠŸèƒ½**ï¼šæä¾›æ‰‹åŠ¨åˆ·æ–°æŒ‰é’®

### æ˜¾ç¤ºå†…å®¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é…ç½®æ–‡ä»¶åˆ†æ               [åˆ·æ–°]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚ ğŸ“Š æ–‡ä»¶å¤§å°: 775.1 KB               â”‚
â”‚ ğŸ“ é¡¹ç›®æ€»æ•°: 15                     â”‚
â”‚ ğŸ“ å†å²è®°å½•: 421 æ¡                 â”‚
â”‚                                     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                     â”‚
â”‚ å†å²è®°å½•æœ€å¤šçš„é¡¹ç›® Top 5:            â”‚
â”‚                                     â”‚
â”‚  [100] antool-mono                 â”‚
â”‚  [100] star-man                    â”‚
â”‚  [ 94] md-save                     â”‚
â”‚  [ 43] api-center                  â”‚
â”‚  [ 25] ccxman                      â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®ç»“æ„
```typescript
interface AnalysisCardProps {
  analysis: AnalyzeResult | null   // åˆ†æç»“æœæ•°æ®
  loading: boolean                  // åŠ è½½çŠ¶æ€
  onRefresh: () => void            // åˆ·æ–°å›è°ƒ
}

// æ˜¾ç¤ºçš„æ•°æ®
{
  fileSize: "775.1 KB",
  projectCount: 15,
  totalHistoryCount: 421,
  topProjects: [
    { path: "antool-mono", count: 100 },
    { path: "star-man", count: 100 },
    ...
  ]
}
```

### äº¤äº’è¡Œä¸º
- **åˆå§‹åŠ è½½**ï¼šç»„ä»¶æŒ‚è½½æ—¶è‡ªåŠ¨è°ƒç”¨åˆ†æ
- **åˆ·æ–°æŒ‰é’®**ï¼šç”¨æˆ·ç‚¹å‡»å¯é‡æ–°åˆ†æ
- **åŠ è½½çŠ¶æ€**ï¼šæ˜¾ç¤ºéª¨æ¶å±æˆ– Spinner

### å®ç°è¦ç‚¹
- ç®€æ´å±•ç¤ºï¼ˆä¸åŒ…å«å›¾è¡¨ï¼‰
- è·¯å¾„ç¼©çŸ­ï¼ˆè¶…è¿‡50å­—ç¬¦æˆªæ–­ï¼‰
- æ•°å­—æ ¼å¼åŒ–ï¼ˆæ–‡ä»¶å¤§å°ç”¨ KB/MBï¼‰

---

## â‘¡ CleanVisualization - å¯è§†åŒ–å›¾è¡¨

### åŠŸèƒ½å®šä½
**"æ•°æ®å¯è§†åŒ–ä¸­å¿ƒ"** - ç”¨å›¾è¡¨ç›´è§‚å±•ç¤ºç©ºé—´å ç”¨æƒ…å†µ

### æ ¸å¿ƒèŒè´£
1. **é¥¼å›¾**ï¼šæ˜¾ç¤ºç©ºé—´å ç”¨åˆ†å¸ƒï¼ˆé¡¹ç›®å†å² vs ç¼“å­˜ vs é…ç½®ï¼‰
2. **æŸ±çŠ¶å›¾**ï¼šæ˜¾ç¤ºå„é¡¹ç›®çš„å†å²è®°å½•æ•°é‡å¯¹æ¯”

### æ˜¾ç¤ºå†…å®¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç©ºé—´å ç”¨åˆ†å¸ƒ                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚      é¥¼å›¾ (Pie Chart)               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚   é¡¹ç›®å†å² 84%  â”‚               â”‚
â”‚   â”‚   ç¼“å­˜æ•°æ®  4%  â”‚               â”‚
â”‚   â”‚   é…ç½®çŠ¶æ€ 12%  â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                     â”‚
â”‚ é¡¹ç›®å†å²è®°å½•å¯¹æ¯” (Top 10)            â”‚
â”‚                                     â”‚
â”‚   æŸ±çŠ¶å›¾ (Bar Chart)                â”‚
â”‚   100 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ antool-mono     â”‚
â”‚   100 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ star-man        â”‚
â”‚    94 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–   md-save         â”‚
â”‚    43 â–ˆâ–ˆâ–ˆâ–ˆâ–        api-center      â”‚
â”‚    25 â–ˆâ–ˆâ–Œ          ccxman          â”‚
â”‚    ...                             â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®è½¬æ¢
```typescript
// è¾“å…¥ï¼šAnalyzeResult
// è¾“å‡ºï¼šå›¾è¡¨æ•°æ®

// é¥¼å›¾æ•°æ®
const pieData = [
  {
    name: 'é¡¹ç›®å†å²',
    value: 650,  // KB
    color: '#3b82f6'
  },
  {
    name: 'ç¼“å­˜æ•°æ®',
    value: 30,
    color: '#8b5cf6'
  },
  {
    name: 'é…ç½®çŠ¶æ€',
    value: 95,
    color: '#10b981'
  },
]

// æŸ±çŠ¶å›¾æ•°æ®
const barData = analysis.projectHistory
  .slice(0, 10)
  .map(p => ({
    name: shortenPath(p.path),  // ç¼©çŸ­è·¯å¾„
    count: p.count,
    color: p.count >= 100 ? 'red' : 'blue'
  }))
```

### å›¾è¡¨é€‰æ‹©

**æ–¹æ¡ˆ Aï¼šä½¿ç”¨ rechartsï¼ˆæ¨èï¼‰**
```typescript
import { PieChart, Pie, BarChart, Bar } from 'recharts'

<PieChart width={400} height={300}>
  <Pie
    data={pieData}
    dataKey="value"
    nameKey="name"
  />
</PieChart>
```

**æ–¹æ¡ˆ Bï¼šCSS æ‰‹ç»˜ï¼ˆç®€å•åœºæ™¯ï¼‰**
```tsx
<div className="pie-chart">
  <div
    className="segment"
    style={{
      background: `conic-gradient(
        blue 0% 84%,
        purple 84% 88%,
        green 88% 100%
      )`
    }}
  />
</div>
```

### å®ç°è¦ç‚¹
- é¢œè‰²ç»Ÿä¸€ï¼ˆä½¿ç”¨é¡¹ç›®ä¸»é¢˜è‰²ï¼‰
- å“åº”å¼ï¼ˆé€‚é…ä¸åŒå±å¹•ï¼‰
- å¯é€‰å®ç°ï¼ˆPhase 2ï¼‰

---

## â‘¢ CleanConfigForm - æ¸…ç†é…ç½®è¡¨å•

### åŠŸèƒ½å®šä½
**"æ“ä½œæ§åˆ¶ä¸­å¿ƒ"** - ç”¨æˆ·é…ç½®æ¸…ç†é€‰é¡¹å¹¶æ‰§è¡Œæ¸…ç†

### æ ¸å¿ƒèŒè´£
1. **æ–¹æ¡ˆé€‰æ‹©**ï¼šæä¾›3ç§é¢„è®¾ + è‡ªå®šä¹‰é€‰é¡¹
2. **å‚æ•°é…ç½®**ï¼šæ»‘å—ã€å¤é€‰æ¡†ç­‰è¡¨å•å…ƒç´ 
3. **å®æ—¶é¢„è§ˆ**ï¼šæ˜¾ç¤ºé¢„è®¡èŠ‚çœç©ºé—´
4. **æ‰§è¡Œæ¸…ç†**ï¼šè°ƒç”¨æ¸…ç† API å¹¶å¤„ç†ç»“æœ

### æ˜¾ç¤ºå†…å®¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ¸…ç†é…ç½®                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚ é€‰æ‹©æ¸…ç†æ–¹æ¡ˆ:                        â”‚
â”‚                                     â”‚
â”‚ â—‹ ä¿å®ˆæ¸…ç†                          â”‚
â”‚   ä¿ç•™æœ€è¿‘10æ¡è®°å½•ï¼Œæ¸…ç†ç¼“å­˜          â”‚
â”‚   é¢„è®¡èŠ‚çœ: 496.8 KB               â”‚
â”‚                                     â”‚
â”‚ â—‹ ä¸­ç­‰æ¸…ç†                          â”‚
â”‚   ä¿ç•™æœ€è¿‘5æ¡è®°å½•ï¼Œæ¸…ç†ç¼“å­˜å’Œç»Ÿè®¡     â”‚
â”‚   é¢„è®¡èŠ‚çœ: 626.2 KB               â”‚
â”‚                                     â”‚
â”‚ â—‹ æ¿€è¿›æ¸…ç†                          â”‚
â”‚   æ¸…ç©ºå†å²è®°å½•ï¼Œæ¸…ç†æ‰€æœ‰æ•°æ®          â”‚
â”‚   é¢„è®¡èŠ‚çœ: 755.6 KB               â”‚
â”‚                                     â”‚
â”‚ â— è‡ªå®šä¹‰                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ â˜‘ æ¸…ç†é¡¹ç›®å†å²è®°å½•           â”‚  â”‚
â”‚   â”‚   ä¿ç•™æœ€è¿‘ [10â–¼] æ¡è®°å½•      â”‚  â”‚
â”‚   â”‚                             â”‚  â”‚
â”‚   â”‚ â˜‘ æ¸…ç†ç¼“å­˜æ•°æ® (çº¦ 30 KB)    â”‚  â”‚
â”‚   â”‚ â˜ é‡ç½®ä½¿ç”¨ç»Ÿè®¡              â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                     â”‚
â”‚ â„¹ï¸ é¢„è®¡æ•ˆæœ:                        â”‚
â”‚   775.1 KB â†’ 278.3 KB              â”‚
â”‚   èŠ‚çœ 496.8 KB (64%)              â”‚
â”‚                                     â”‚
â”‚          [æ‰§è¡Œæ¸…ç†]                  â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### çŠ¶æ€ç®¡ç†
```typescript
interface ConfigFormState {
  // å½“å‰æ¨¡å¼
  mode: 'conservative' | 'moderate' | 'aggressive' | 'custom'

  // æ¸…ç†é€‰é¡¹
  options: CleanOptions

  // é¢„è®¡æ•ˆæœ
  estimated: {
    sizeBefore: number
    sizeAfter: number
    saved: number
    savedPercent: number
  }

  // æ‰§è¡ŒçŠ¶æ€
  cleaning: boolean
}
```

### äº¤äº’æµç¨‹

**é¢„è®¾æ¨¡å¼ï¼š**
```
ç”¨æˆ·é€‰æ‹©"ä¿å®ˆæ¸…ç†"
  â†“
è‡ªåŠ¨å¡«å…… options = CleanPresets.conservative()
  â†“
è®¡ç®—é¢„è®¡æ•ˆæœ
  â†“
æ›´æ–° UI æ˜¾ç¤º
```

**è‡ªå®šä¹‰æ¨¡å¼ï¼š**
```
ç”¨æˆ·å‹¾é€‰"æ¸…ç†é¡¹ç›®å†å²"
  â†“
æ˜¾ç¤º"ä¿ç•™Næ¡"æ»‘å—
  â†“
ç”¨æˆ·æ‹–åŠ¨æ»‘å— (10 â†’ 5)
  â†“
å®æ—¶è®¡ç®—é¢„è®¡èŠ‚çœ
  â†“
æ›´æ–°é¢„è®¡æ•ˆæœæ˜¾ç¤º
```

**æ‰§è¡Œæ¸…ç†ï¼š**
```
ç”¨æˆ·ç‚¹å‡»"æ‰§è¡Œæ¸…ç†"
  â†“
æ˜¾ç¤ºç¡®è®¤å¼¹çª—
  â†“
ç”¨æˆ·ç¡®è®¤
  â†“
è°ƒç”¨ window.electronAPI.clean.execute(options)
  â†“
æ˜¾ç¤ºåŠ è½½çŠ¶æ€ (Spinner)
  â†“
æ¸…ç†å®Œæˆ
  â†“
æ‰“å¼€ CleanResultModal
```

### å®ç°è¦ç‚¹
- Tab æˆ– Radio åˆ‡æ¢æ¨¡å¼
- æ»‘å—èŒƒå›´ï¼š0-50ï¼Œæ­¥é•¿5
- å®æ—¶è®¡ç®—ï¼ˆdebounce 300msï¼‰
- ç¦ç”¨æŒ‰é’®ï¼ˆæ¸…ç†ä¸­ï¼‰

---

## â‘£ CleanResultModal - ç»“æœå¼¹çª—

### åŠŸèƒ½å®šä½
**"ç»“æœå±•ç¤ºå™¨"** - æ¸…ç†å®Œæˆåæ˜¾ç¤ºè¯¦ç»†ç»“æœ

### æ ¸å¿ƒèŒè´£
1. **ç»“æœå±•ç¤º**ï¼šæ˜¾ç¤ºæ¸…ç†å‰åå¯¹æ¯”
2. **æ“ä½œè®°å½•**ï¼šåˆ—å‡ºæ‰§è¡Œçš„æ¸…ç†æ“ä½œ
3. **å¤‡ä»½æç¤º**ï¼šæ˜¾ç¤ºå¤‡ä»½æ–‡ä»¶è·¯å¾„
4. **å¿«æ·æ“ä½œ**ï¼šæ‰“å¼€å¤‡ä»½æ–‡ä»¶å¤¹

### æ˜¾ç¤ºå†…å®¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… æ¸…ç†å®Œæˆ                  [Ã—]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚       æ¸…ç†å‰        â†’    æ¸…ç†å      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚     â”‚775.1 KBâ”‚    â†’    â”‚278.3 KBâ”‚  â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚   ğŸ’¾ èŠ‚çœ 496.8 KB (64%)           â”‚
â”‚                                     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                     â”‚
â”‚ æ‰§è¡Œçš„æ“ä½œ:                         â”‚
â”‚   âœ“ æ¸…ç†å†å²è®°å½• 311 æ¡              â”‚
â”‚   âœ“ æ¸…ç†ç¼“å­˜æ•°æ®                    â”‚
â”‚                                     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                     â”‚
â”‚ âš ï¸ å¤‡ä»½æ–‡ä»¶å·²ä¿å­˜:                  â”‚
â”‚   ~/.claude.json.backup-           â”‚
â”‚   2025-11-10T15-30-45              â”‚
â”‚                                     â”‚
â”‚   [æ‰“å¼€å¤‡ä»½æ–‡ä»¶å¤¹]                   â”‚
â”‚                                     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                     â”‚
â”‚            [å®Œæˆ]                    â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æ¥æº
```typescript
interface ResultModalProps {
  open: boolean                    // æ˜¯å¦æ˜¾ç¤º
  result: CleanResult | null      // æ¸…ç†ç»“æœ
  onClose: () => void             // å…³é—­å›è°ƒ
}

// CleanResult æ•°æ®ç»“æ„
{
  sizeBefore: 793651,              // å­—èŠ‚
  sizeAfter: 284928,
  saved: 508723,
  cleanedItems: {
    projectHistory: 311,           // æ¸…ç†äº†311æ¡
    cache: true,
    stats: false
  },
  backupPath: "~/.claude.json.backup-2025-11-10T15-30-45"
}
```

### æ˜¾ç¤ºé€»è¾‘
```typescript
// åªæ˜¾ç¤ºæ‰§è¡Œäº†çš„æ“ä½œ
{result.cleanedItems.projectHistory > 0 && (
  <ListItem>
    âœ“ æ¸…ç†å†å²è®°å½• {result.cleanedItems.projectHistory} æ¡
  </ListItem>
)}

{result.cleanedItems.cache && (
  <ListItem>âœ“ æ¸…ç†ç¼“å­˜æ•°æ®</ListItem>
)}

{result.cleanedItems.stats && (
  <ListItem>âœ“ é‡ç½®ä½¿ç”¨ç»Ÿè®¡</ListItem>
)}
```

### å¿«æ·æ“ä½œ
```typescript
// æ‰“å¼€å¤‡ä»½æ–‡ä»¶å¤¹
const openBackupFolder = async () => {
  await window.electronAPI.clean.openBackupFolder()
}

// å…³é—­ååˆ·æ–°åˆ†ææ•°æ®
const handleClose = () => {
  onClose()
  // çˆ¶ç»„ä»¶ä¼šé‡æ–°åŠ è½½åˆ†ææ•°æ®
}
```

### å®ç°è¦ç‚¹
- å¤§æ•°å­—é«˜äº®ï¼ˆèŠ‚çœç©ºé—´ï¼‰
- ç»¿è‰²è¡¨ç¤ºæˆåŠŸ
- é»„è‰²è­¦å‘Šå¤‡ä»½è·¯å¾„
- å¯ç‚¹å‡»è·¯å¾„å¤åˆ¶

---

## â‘¤ BackupManager - å¤‡ä»½ç®¡ç†

### åŠŸèƒ½å®šä½
**"å¤‡ä»½æ—¶å…‰æœº"** - ç®¡ç†æ‰€æœ‰å†å²å¤‡ä»½æ–‡ä»¶

### æ ¸å¿ƒèŒè´£
1. **åˆ—è¡¨å±•ç¤º**ï¼šæ˜¾ç¤ºæ‰€æœ‰å¤‡ä»½æ–‡ä»¶
2. **æ¢å¤åŠŸèƒ½**ï¼šæ¢å¤æŒ‡å®šå¤‡ä»½
3. **åˆ é™¤åŠŸèƒ½**ï¼šåˆ é™¤æ—§å¤‡ä»½
4. **æ’åºç­›é€‰**ï¼šæŒ‰æ—¶é—´æ’åº

### æ˜¾ç¤ºå†…å®¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¤‡ä»½ç®¡ç†                        [åˆ·æ–°]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚ æœ€è¿‘å¤‡ä»½: 2025-11-10 15:30:45              â”‚
â”‚                                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                             â”‚
â”‚ æ‰€æœ‰å¤‡ä»½:                                   â”‚
â”‚                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ æ—¶é—´              â”‚ å¤§å°    â”‚ æ“ä½œ      â”‚â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚ â”‚ 2025-11-10 15:30 â”‚ 775 KB â”‚ [æ¢å¤][åˆ é™¤] â”‚â”‚
â”‚ â”‚ 2025-11-10 14:20 â”‚ 812 KB â”‚ [æ¢å¤][åˆ é™¤] â”‚â”‚
â”‚ â”‚ 2025-11-09 10:15 â”‚ 698 KB â”‚ [æ¢å¤][åˆ é™¤] â”‚â”‚
â”‚ â”‚ 2025-11-08 16:45 â”‚ 721 KB â”‚ [æ¢å¤][åˆ é™¤] â”‚â”‚
â”‚ â”‚ ...                                     â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                             â”‚
â”‚ ğŸ’¡ æç¤º: æ¢å¤å¤‡ä»½ä¼šè¦†ç›–å½“å‰é…ç½®æ–‡ä»¶          â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®è·å–
```typescript
interface BackupInfo {
  path: string                    // å®Œæ•´è·¯å¾„
  filename: string                // æ–‡ä»¶å
  timestamp: Date                 // æ—¶é—´æˆ³
  size: number                    // å¤§å°ï¼ˆå­—èŠ‚ï¼‰
}

// è·å–å¤‡ä»½åˆ—è¡¨
const backups = await window.electronAPI.clean.getBackups()

// æ’åºï¼šæœ€æ–°çš„åœ¨å‰
backups.sort((a, b) => b.timestamp - a.timestamp)
```

### æ“ä½œåŠŸèƒ½

**1. æ¢å¤å¤‡ä»½ï¼š**
```typescript
const handleRestore = async (backup: BackupInfo) => {
  // 1. ç¡®è®¤å¼¹çª—
  const confirmed = await showConfirm(
    'ç¡®è®¤æ¢å¤å¤‡ä»½ï¼Ÿ',
    'è¿™å°†è¦†ç›–å½“å‰é…ç½®æ–‡ä»¶'
  )

  if (!confirmed) return

  // 2. æ‰§è¡Œæ¢å¤
  const result = await window.electronAPI.clean.restoreBackup(backup.path)

  // 3. æç¤ºæˆåŠŸ
  if (result.success) {
    showSuccess('æ¢å¤æˆåŠŸ')
    // åˆ·æ–°åˆ†ææ•°æ®
    onRefresh()
  }
}
```

**2. åˆ é™¤å¤‡ä»½ï¼š**
```typescript
const handleDelete = async (backup: BackupInfo) => {
  // 1. ç¡®è®¤å¼¹çª—
  const confirmed = await showConfirm(
    'ç¡®è®¤åˆ é™¤å¤‡ä»½ï¼Ÿ',
    'æ­¤æ“ä½œä¸å¯æ¢å¤'
  )

  if (!confirmed) return

  // 2. æ‰§è¡Œåˆ é™¤
  const result = await window.electronAPI.clean.deleteBackup(backup.path)

  // 3. åˆ·æ–°åˆ—è¡¨
  if (result.success) {
    loadBackups()
  }
}
```

### å®ç°è¦ç‚¹
- å¯é€‰åŠŸèƒ½ï¼ˆPhase 3ï¼‰
- æœ€å¤šæ˜¾ç¤ºæœ€è¿‘10ä¸ªå¤‡ä»½
- æ—¶é—´æ ¼å¼åŒ–ï¼ˆç›¸å¯¹æ—¶é—´ + ç»å¯¹æ—¶é—´ï¼‰
- å±é™©æ“ä½œéœ€ç¡®è®¤

---

## ç»„ä»¶é—´åä½œå…³ç³»

### æ•°æ®æµ
```
CleanPage (çˆ¶ç»„ä»¶)
  â†“
  â”œâ”€ CleanAnalysisCard
  â”‚    â†“ è°ƒç”¨ analyze()
  â”‚    â†“ è¿”å› AnalyzeResult
  â”‚    â†“ ä¼ é€’ç»™ â†’
  â”‚
  â”œâ”€ CleanVisualization (æ¥æ”¶ AnalyzeResult)
  â”‚    â†“ è½¬æ¢ä¸ºå›¾è¡¨æ•°æ®
  â”‚    â†“ æ¸²æŸ“å›¾è¡¨
  â”‚
  â”œâ”€ CleanConfigForm (æ¥æ”¶ AnalyzeResult)
  â”‚    â†“ ç”¨æˆ·é…ç½®é€‰é¡¹
  â”‚    â†“ ç‚¹å‡»"æ‰§è¡Œæ¸…ç†"
  â”‚    â†“ è°ƒç”¨ execute(options)
  â”‚    â†“ è¿”å› CleanResult
  â”‚    â†“ æ‰“å¼€ â†’
  â”‚
  â”œâ”€ CleanResultModal (æ¥æ”¶ CleanResult)
  â”‚    â†“ æ˜¾ç¤ºç»“æœ
  â”‚    â†“ ç”¨æˆ·å…³é—­
  â”‚    â†“ è§¦å‘é‡æ–° analyze()
  â”‚
  â””â”€ BackupManager
       â†“ ç‹¬ç«‹ç®¡ç†å¤‡ä»½
```

### çŠ¶æ€ç®¡ç†
```typescript
// CleanPage.tsx
function CleanPage() {
  // å…±äº«çŠ¶æ€
  const [analysis, setAnalysis] = useState<AnalyzeResult | null>(null)
  const [result, setResult] = useState<CleanResult | null>(null)
  const [resultOpen, setResultOpen] = useState(false)

  // å…±äº«æ–¹æ³•
  const loadAnalysis = async () => { ... }
  const handleClean = async (options) => { ... }

  return (
    <>
      <CleanAnalysisCard
        analysis={analysis}
        onRefresh={loadAnalysis}
      />

      <CleanVisualization
        analysis={analysis}
      />

      <CleanConfigForm
        analysis={analysis}
        onClean={handleClean}
      />

      <CleanResultModal
        open={resultOpen}
        result={result}
        onClose={() => setResultOpen(false)}
      />

      <BackupManager />
    </>
  )
}
```

---

## å®ç°ä¼˜å…ˆçº§

### Phase 1: MVPï¼ˆå¿…é¡»ï¼‰
1. âœ… CleanAnalysisCardï¼ˆåŸºç¡€ä¿¡æ¯ï¼‰
2. âœ… CleanConfigFormï¼ˆ3ç§é¢„è®¾ + æ‰§è¡Œï¼‰
3. âœ… CleanResultModalï¼ˆç»“æœå±•ç¤ºï¼‰

### Phase 2: å¢å¼ºï¼ˆæ¨èï¼‰
4. âœ… CleanVisualizationï¼ˆå›¾è¡¨ï¼‰
5. âœ… CleanConfigForm è‡ªå®šä¹‰é€‰é¡¹

### Phase 3: é«˜çº§ï¼ˆå¯é€‰ï¼‰
6. âœ… BackupManagerï¼ˆå¤‡ä»½ç®¡ç†ï¼‰

---

## è®¾è®¡åŸåˆ™æ€»ç»“

### å•ä¸€èŒè´£
- âœ… æ¯ä¸ªç»„ä»¶åªè´Ÿè´£ä¸€ä»¶äº‹
- âœ… CleanAnalysisCard åªå±•ç¤ºï¼Œä¸æ‰§è¡Œ
- âœ… CleanConfigForm åªé…ç½®å’Œè§¦å‘ï¼Œä¸å¤„ç†ç»“æœ
- âœ… CleanResultModal åªæ˜¾ç¤ºç»“æœï¼Œä¸æ‰§è¡Œæ¸…ç†

### æ•°æ®æµå‘
- âœ… å•å‘æ•°æ®æµï¼ˆçˆ¶ â†’ å­ï¼‰
- âœ… äº‹ä»¶å‘ä¸Šï¼ˆå­ â†’ çˆ¶ via callbacksï¼‰
- âœ… æ²¡æœ‰è·¨ç»„ä»¶ç›´æ¥é€šä¿¡

### ç®€æ´ä¼˜å…ˆ
- âœ… æ¯ä¸ªç»„ä»¶ < 100 è¡Œ
- âœ… ä¸å¼•å…¥çŠ¶æ€ç®¡ç†åº“
- âœ… å¤ç”¨ç°æœ‰ UI ç»„ä»¶

### ç”¨æˆ·ä½“éªŒ
- âœ… å³æ—¶åé¦ˆï¼ˆåŠ è½½çŠ¶æ€ã€æˆåŠŸæç¤ºï¼‰
- âœ… å®‰å…¨ç¬¬ä¸€ï¼ˆç¡®è®¤å¼¹çª—ã€å¤‡ä»½æç¤ºï¼‰
- âœ… æ“ä½œå¯é€†ï¼ˆå¤‡ä»½ç®¡ç†ï¼‰

---

## å®Œæ•´ä»£ç é‡ä¼°ç®—

| ç»„ä»¶ | ä»£ç é‡ | å¤æ‚åº¦ |
|------|--------|--------|
| CleanAnalysisCard | ~80è¡Œ | ç®€å• |
| CleanVisualization | ~120è¡Œ | ä¸­ç­‰ï¼ˆå›¾è¡¨ï¼‰ |
| CleanConfigForm | ~200è¡Œ | ä¸­ç­‰ï¼ˆè¡¨å•é€»è¾‘ï¼‰ |
| CleanResultModal | ~80è¡Œ | ç®€å• |
| BackupManager | ~120è¡Œ | ä¸­ç­‰ |
| **æ€»è®¡** | **~600è¡Œ** | |

æ¯”æœ€åˆä¼°ç®—è¿˜è¦ç²¾ç¡®ï¼æ¯ä¸ªç»„ä»¶éƒ½ä¿æŒåœ¨ 50-200 è¡Œä¹‹é—´ï¼Œéå¸¸ç¬¦åˆé¡¹ç›®è§„èŒƒã€‚
