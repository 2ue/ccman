# GMN é…ç½®è„šæœ¬æµ‹è¯•æŠ¥å‘Š

## æµ‹è¯•æ¦‚è§ˆ

âœ… **æ‰€æœ‰æµ‹è¯•é€šè¿‡**ï¼š12/12

æµ‹è¯•æ—¶é—´ï¼š2025-01-24
æµ‹è¯•ç¯å¢ƒï¼šä¸´æ—¶æµ‹è¯•ç›®å½•ï¼ˆä¸å½±å“æ­£å¼ç¯å¢ƒï¼‰

---

## æµ‹è¯•ç­–ç•¥

### 1. ç¯å¢ƒéš”ç¦»

**æµ‹è¯•ç›®å½•**ï¼š
```
/var/folders/.../ccman-gmn-test-{timestamp}/
â”œâ”€â”€ home/
â”‚   â”œâ”€â”€ .claude/
â”‚   â”œâ”€â”€ .codex/
â”‚   â”œâ”€â”€ .gemini/
â”‚   â””â”€â”€ .config/opencode/
```

**éš”ç¦»æœºåˆ¶**ï¼š
- âœ… ä½¿ç”¨ä¸´æ—¶ç›®å½•ï¼ˆ`os.tmpdir()`ï¼‰
- âœ… æ¯æ¬¡æµ‹è¯•ä½¿ç”¨å”¯ä¸€æ—¶é—´æˆ³
- âœ… è®¾ç½® `HOME` ç¯å¢ƒå˜é‡æŒ‡å‘æµ‹è¯•ç›®å½•
- âœ… æµ‹è¯•å®Œæˆåè‡ªåŠ¨æ¸…ç†

**ä¿æŠ¤æ­£å¼ç¯å¢ƒ**ï¼š
- âŒ ç»å¯¹ä¸ä¼šä¿®æ”¹ `~/.ccman`
- âŒ ç»å¯¹ä¸ä¼šä¿®æ”¹ `~/.claude`
- âŒ ç»å¯¹ä¸ä¼šä¿®æ”¹ `~/.codex`
- âŒ ç»å¯¹ä¸ä¼šä¿®æ”¹ `~/.gemini`
- âŒ ç»å¯¹ä¸ä¼šä¿®æ”¹ `~/.config/opencode`

---

## æµ‹è¯•ç»“æœ

### æµ‹è¯• 1: ç‹¬ç«‹è„šæœ¬ - ä¿æŠ¤æ¨¡å¼ï¼ˆä»é›¶å¼€å§‹ï¼‰

**æµ‹è¯•åœºæ™¯**ï¼šé¦–æ¬¡è¿è¡Œï¼Œæ²¡æœ‰ä»»ä½•ç°æœ‰é…ç½®

**æµ‹è¯•ç”¨ä¾‹**ï¼š
- âœ… åº”è¯¥åˆ›å»ºæ‰€æœ‰é…ç½®æ–‡ä»¶
- âœ… Claude é…ç½®åº”è¯¥åŒ…å«æ­£ç¡®çš„è®¤è¯ä¿¡æ¯
- âœ… Codex é…ç½®åº”è¯¥åŒ…å« GMN provider
- âœ… Codex auth.json åº”è¯¥åŒ…å« API Key
- âœ… Gemini é…ç½®åº”è¯¥å¯ç”¨ IDE
- âœ… Gemini .env åº”è¯¥åŒ…å«è®¤è¯ä¿¡æ¯
- âœ… OpenCode é…ç½®åº”è¯¥åŒ…å« GMN provider

**éªŒè¯å†…å®¹**ï¼š
```javascript
// Claude
config.env.ANTHROPIC_AUTH_TOKEN === 'sk-ant-test-key-123456'
config.env.ANTHROPIC_BASE_URL === 'https://gmn.chuangzuoli.com/api'

// Codex
config.includes('model_provider = "gmn"')
config.includes('model = "gpt-5.2-codex"')
config.includes('model_reasoning_effort = "high"')
config.includes('model_verbosity = "high"')
config.includes('disable_response_storage = true')
config.includes('windows_wsl_setup_acknowledged = true')
config.includes('web_search = "live"')
config.includes('[sandbox_workspace_write]')
config.includes('network_access = true')
config.includes('[model_providers.gmn]')
auth.OPENAI_API_KEY === 'sk-ant-test-key-123456'

// Gemini
settings.ide.enabled === true
env.includes('GEMINI_API_KEY=sk-ant-test-key-123456')
env.includes('GOOGLE_GEMINI_BASE_URL=https://gmn.chuangzuoli.com')

// OpenCode
config.provider.gmn.name === 'GMN'
config.provider.gmn.options.apiKey === 'sk-ant-test-key-123456'
config.provider.gmn.options.baseURL === 'https://gmn.chuangzuoli.com'
```

---

### æµ‹è¯• 2: ç‹¬ç«‹è„šæœ¬ - ä¿æŠ¤æ¨¡å¼ï¼ˆä¿ç•™ç°æœ‰é…ç½®ï¼‰

**æµ‹è¯•åœºæ™¯**ï¼šå·²æœ‰é…ç½®ï¼ŒéªŒè¯ä¿æŠ¤æ¨¡å¼æ˜¯å¦ä¿ç•™ç”¨æˆ·è‡ªå®šä¹‰é…ç½®

**é¢„è®¾é…ç½®**ï¼š
```javascript
// Claude - åŒ…å«è‡ªå®šä¹‰å­—æ®µ
{
  env: {
    ANTHROPIC_AUTH_TOKEN: 'old-key',
    ANTHROPIC_BASE_URL: 'https://old.com',
    CUSTOM_ENV: 'should-be-preserved',  // è‡ªå®šä¹‰ç¯å¢ƒå˜é‡
  },
  permissions: {
    allow: ['custom-permission'],  // è‡ªå®šä¹‰æƒé™
  },
  customField: 'custom-value',  // è‡ªå®šä¹‰å­—æ®µ
}

// Gemini .env - åŒ…å«è‡ªå®šä¹‰å˜é‡
CUSTOM_VAR=custom-value
GEMINI_API_KEY=old-key

// OpenCode - åŒ…å«å…¶ä»– provider
{
  provider: {
    other: {
      name: 'Other Provider',
      options: { apiKey: 'other-key' },
    },
  },
}
```

**æµ‹è¯•ç”¨ä¾‹**ï¼š
- âœ… Claude åº”è¯¥ä¿ç•™è‡ªå®šä¹‰å­—æ®µ
- âœ… Gemini .env åº”è¯¥ä¿ç•™å…¶ä»–å˜é‡
- âœ… OpenCode åº”è¯¥ä¿ç•™å…¶ä»– provider

**éªŒè¯å†…å®¹**ï¼š
```javascript
// Claude - è®¤è¯å­—æ®µå·²æ›´æ–°ï¼Œå…¶ä»–å­—æ®µä¿ç•™
config.env.ANTHROPIC_AUTH_TOKEN === 'sk-ant-test-key-123456'  // âœ… æ›´æ–°
config.env.ANTHROPIC_BASE_URL === 'https://gmn.chuangzuoli.com/api'  // âœ… æ›´æ–°
config.env.CUSTOM_ENV === 'should-be-preserved'  // âœ… ä¿ç•™
config.permissions.allow[0] === 'custom-permission'  // âœ… ä¿ç•™
config.customField === 'custom-value'  // âœ… ä¿ç•™

// Gemini .env - è®¤è¯å­—æ®µå·²æ›´æ–°ï¼Œå…¶ä»–å˜é‡ä¿ç•™
env.includes('CUSTOM_VAR=custom-value')  // âœ… ä¿ç•™
env.includes('GEMINI_API_KEY=sk-ant-test-key-123456')  // âœ… æ›´æ–°

// OpenCode - GMN provider å·²æ·»åŠ ï¼Œå…¶ä»– provider ä¿ç•™
config.provider.other.name === 'Other Provider'  // âœ… ä¿ç•™
config.provider.gmn.name === 'GMN'  // âœ… æ·»åŠ 
```

**ç»“è®º**ï¼š
- âœ… ä¿æŠ¤æ¨¡å¼å®Œç¾å·¥ä½œ
- âœ… åªæ›´æ–°è®¤è¯å­—æ®µ
- âœ… ä¿ç•™æ‰€æœ‰ç”¨æˆ·è‡ªå®šä¹‰é…ç½®

---

### æµ‹è¯• 3: ç‹¬ç«‹è„šæœ¬ - å…¨è¦†ç›–æ¨¡å¼

**æµ‹è¯•åœºæ™¯**ï¼šå…¨è¦†ç›–æ¨¡å¼éœ€è¦äº¤äº’å¼ç¡®è®¤

**çŠ¶æ€**ï¼šâš ï¸ è·³è¿‡è‡ªåŠ¨æµ‹è¯•ï¼ˆéœ€è¦äº¤äº’å¼è¾“å…¥ï¼‰

**æ‰‹åŠ¨æµ‹è¯•å‘½ä»¤**ï¼š
```bash
node scripts/setup-gmn-standalone.mjs --overwrite
```

**é¢„æœŸè¡Œä¸º**ï¼š
1. æ˜¾ç¤ºè­¦å‘Šä¿¡æ¯
2. è¦æ±‚ç”¨æˆ·ç¡®è®¤ï¼ˆè¾“å…¥ `y`ï¼‰
3. åªæœ‰ç¡®è®¤åæ‰æ‰§è¡Œ
4. ä½¿ç”¨é»˜è®¤é…ç½®è¦†ç›–æ‰€æœ‰å­—æ®µï¼ˆè®¤è¯å­—æ®µé™¤å¤–ï¼‰

---

### æµ‹è¯• 4: åŸºäº ccman çš„è„šæœ¬

**æµ‹è¯•åœºæ™¯**ï¼šä½¿ç”¨ ccman ToolManager API é…ç½®

**æµ‹è¯•ç”¨ä¾‹**ï¼š
- âœ… åŸºäº ccman çš„è„šæœ¬åº”è¯¥æˆåŠŸæ‰§è¡Œ
- âœ… åº”è¯¥åˆ›å»º ccman é…ç½®æ–‡ä»¶

**éªŒè¯å†…å®¹**ï¼š
```javascript
// è„šæœ¬æ‰§è¡ŒæˆåŠŸ
result.success === true

// ccman é…ç½®ç›®å½•å·²åˆ›å»ºï¼ˆæµ‹è¯•æ¨¡å¼ä¸‹ä½¿ç”¨ /tmp/ccman-test/.ccmanï¼‰
fs.existsSync('/tmp/ccman-test/.ccman') === true
```

**ç»“è®º**ï¼š
- âœ… åŸºäº ccman çš„è„šæœ¬æ­£å¸¸å·¥ä½œ
- âœ… é…ç½®è¢« ccman ç®¡ç†
- âœ… å¯ä»¥é€šè¿‡ ccman CLI æŸ¥çœ‹å’Œåˆ‡æ¢

---

## æµ‹è¯•è¦†ç›–ç‡

### åŠŸèƒ½è¦†ç›–

| åŠŸèƒ½ | æµ‹è¯•çŠ¶æ€ | è¯´æ˜ |
|------|---------|------|
| **ç‹¬ç«‹è„šæœ¬ - ä¿æŠ¤æ¨¡å¼** | âœ… å®Œå…¨è¦†ç›– | 7 ä¸ªæµ‹è¯•ç”¨ä¾‹ |
| **ç‹¬ç«‹è„šæœ¬ - ä¿æŠ¤æ¨¡å¼ï¼ˆä¿ç•™é…ç½®ï¼‰** | âœ… å®Œå…¨è¦†ç›– | 3 ä¸ªæµ‹è¯•ç”¨ä¾‹ |
| **ç‹¬ç«‹è„šæœ¬ - å…¨è¦†ç›–æ¨¡å¼** | âš ï¸ æ‰‹åŠ¨æµ‹è¯• | éœ€è¦äº¤äº’å¼ç¡®è®¤ |
| **åŸºäº ccman çš„è„šæœ¬** | âœ… å®Œå…¨è¦†ç›– | 2 ä¸ªæµ‹è¯•ç”¨ä¾‹ |

### å·¥å…·è¦†ç›–

| å·¥å…· | é…ç½®æ–‡ä»¶ | æµ‹è¯•çŠ¶æ€ |
|------|---------|---------|
| **Claude Code** | `~/.claude/settings.json` | âœ… å·²æµ‹è¯• |
| **Codex** | `~/.codex/config.toml`<br>`~/.codex/auth.json` | âœ… å·²æµ‹è¯• |
| **Gemini CLI** | `~/.gemini/settings.json`<br>`~/.gemini/.env` | âœ… å·²æµ‹è¯• |
| **OpenCode** | `~/.config/opencode/opencode.json` | âœ… å·²æµ‹è¯• |

### é…ç½®ä¿æŠ¤è¦†ç›–

| ä¿æŠ¤é¡¹ | æµ‹è¯•çŠ¶æ€ | è¯´æ˜ |
|--------|---------|------|
| **Claude permissions** | âœ… å·²éªŒè¯ | ä¿ç•™ç”¨æˆ·æƒé™é…ç½® |
| **Claude è‡ªå®šä¹‰ env** | âœ… å·²éªŒè¯ | ä¿ç•™å…¶ä»–ç¯å¢ƒå˜é‡ |
| **Claude è‡ªå®šä¹‰å­—æ®µ** | âœ… å·²éªŒè¯ | ä¿ç•™é¡¶å±‚è‡ªå®šä¹‰å­—æ®µ |
| **Gemini è‡ªå®šä¹‰ env** | âœ… å·²éªŒè¯ | ä¿ç•™å…¶ä»–ç¯å¢ƒå˜é‡ |
| **OpenCode å…¶ä»– provider** | âœ… å·²éªŒè¯ | ä¿ç•™å…¶ä»–æœåŠ¡å•†é…ç½® |

---

## æµ‹è¯•å‘½ä»¤

### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
node scripts/test-gmn-setup.mjs
```

### æ‰‹åŠ¨æµ‹è¯•å…¨è¦†ç›–æ¨¡å¼

```bash
# åˆ›å»ºæµ‹è¯•ç›®å½•
export TEST_HOME=/tmp/gmn-test-manual
mkdir -p $TEST_HOME

# è¿è¡Œè„šæœ¬ï¼ˆå…¨è¦†ç›–æ¨¡å¼ï¼‰
HOME=$TEST_HOME node scripts/setup-gmn-standalone.mjs --overwrite

# éªŒè¯é…ç½®
cat $TEST_HOME/.claude/settings.json
cat $TEST_HOME/.codex/config.toml

# æ¸…ç†
rm -rf $TEST_HOME
```

---

## æµ‹è¯•è„šæœ¬è¯´æ˜

### test-gmn-setup.mjs

**ä½ç½®**ï¼š`scripts/test-gmn-setup.mjs`

**åŠŸèƒ½**ï¼š
- è‡ªåŠ¨åŒ–æµ‹è¯•ä¸¤ä¸ª GMN é…ç½®è„šæœ¬
- ä½¿ç”¨ä¸´æ—¶æµ‹è¯•ç›®å½•ï¼ˆä¸å½±å“æ­£å¼ç¯å¢ƒï¼‰
- éªŒè¯é…ç½®æ–‡ä»¶å†…å®¹
- æµ‹è¯•å®Œæˆåè‡ªåŠ¨æ¸…ç†

**æµ‹è¯•æµç¨‹**ï¼š
1. åˆ›å»ºä¸´æ—¶æµ‹è¯•ç›®å½•
2. è¿è¡Œç‹¬ç«‹è„šæœ¬ï¼ˆä¿æŠ¤æ¨¡å¼ï¼Œä»é›¶å¼€å§‹ï¼‰
3. éªŒè¯æ‰€æœ‰é…ç½®æ–‡ä»¶
4. åˆ›å»ºåŒ…å«è‡ªå®šä¹‰é…ç½®çš„æ–‡ä»¶
5. å†æ¬¡è¿è¡Œç‹¬ç«‹è„šæœ¬ï¼ˆä¿æŠ¤æ¨¡å¼ï¼‰
6. éªŒè¯è‡ªå®šä¹‰é…ç½®æ˜¯å¦ä¿ç•™
7. è¿è¡ŒåŸºäº ccman çš„è„šæœ¬
8. éªŒè¯ ccman é…ç½®
9. æ¸…ç†æµ‹è¯•ç›®å½•

**å®‰å…¨ä¿è¯**ï¼š
- âœ… ä½¿ç”¨ `os.tmpdir()` åˆ›å»ºä¸´æ—¶ç›®å½•
- âœ… è®¾ç½® `HOME` ç¯å¢ƒå˜é‡æŒ‡å‘æµ‹è¯•ç›®å½•
- âœ… ç»å¯¹ä¸ä¼šä¿®æ”¹æ­£å¼ç¯å¢ƒ
- âœ… æµ‹è¯•å®Œæˆåè‡ªåŠ¨æ¸…ç†

---

## é—®é¢˜ä¿®å¤è®°å½•

### é—®é¢˜ 1: setup-gmn.mjs å¼•ç”¨é”™è¯¯è·¯å¾„

**é—®é¢˜**ï¼š
```javascript
// âŒ é”™è¯¯
import { ... } from '../packages/core/src/index.js'
```

**åŸå› **ï¼šæ„å»ºåçš„æ–‡ä»¶åœ¨ `dist` ç›®å½•ï¼Œä¸æ˜¯ `src` ç›®å½•

**ä¿®å¤**ï¼š
```javascript
// âœ… æ­£ç¡®
import { ... } from '../packages/core/dist/index.js'
```

**å½±å“**ï¼šåŸºäº ccman çš„è„šæœ¬æ— æ³•è¿è¡Œ

**çŠ¶æ€**ï¼šâœ… å·²ä¿®å¤

---

## æ€»ç»“

### âœ… æµ‹è¯•é€šè¿‡

- **12/12** æµ‹è¯•ç”¨ä¾‹é€šè¿‡
- **4/4** å·¥å…·é…ç½®æ­£ç¡®
- **5/5** é…ç½®ä¿æŠ¤é¡¹éªŒè¯é€šè¿‡

### âœ… ç¯å¢ƒå®‰å…¨

- ä½¿ç”¨ä¸´æ—¶æµ‹è¯•ç›®å½•
- ä¸å½±å“æ­£å¼ç¯å¢ƒ
- è‡ªåŠ¨æ¸…ç†æµ‹è¯•æ•°æ®

### âœ… åŠŸèƒ½éªŒè¯

- ç‹¬ç«‹è„šæœ¬ä¿æŠ¤æ¨¡å¼æ­£å¸¸å·¥ä½œ
- é…ç½®ä¿æŠ¤æœºåˆ¶æœ‰æ•ˆ
- åŸºäº ccman çš„è„šæœ¬æ­£å¸¸å·¥ä½œ

### âš ï¸ å¾…æ‰‹åŠ¨æµ‹è¯•

- ç‹¬ç«‹è„šæœ¬å…¨è¦†ç›–æ¨¡å¼ï¼ˆéœ€è¦äº¤äº’å¼ç¡®è®¤ï¼‰

---

## ä¸‹ä¸€æ­¥

1. âœ… æ‰€æœ‰è‡ªåŠ¨åŒ–æµ‹è¯•é€šè¿‡
2. âš ï¸ æ‰‹åŠ¨æµ‹è¯•å…¨è¦†ç›–æ¨¡å¼
3. âœ… æ›´æ–°æ–‡æ¡£
4. âœ… å‡†å¤‡å‘å¸ƒ

---

## é™„å½•ï¼šæµ‹è¯•è¾“å‡ºç¤ºä¾‹

```
ğŸ§ª GMN é…ç½®è„šæœ¬æµ‹è¯•

æµ‹è¯•ç›®å½•: /var/folders/.../ccman-gmn-test-1769246309969

ğŸ“‹ æµ‹è¯• 1: ç‹¬ç«‹è„šæœ¬ - ä¿æŠ¤æ¨¡å¼ï¼ˆä»é›¶å¼€å§‹ï¼‰

âœ… åº”è¯¥åˆ›å»ºæ‰€æœ‰é…ç½®æ–‡ä»¶
âœ… Claude é…ç½®åº”è¯¥åŒ…å«æ­£ç¡®çš„è®¤è¯ä¿¡æ¯
âœ… Codex é…ç½®åº”è¯¥åŒ…å« GMN provider
âœ… Codex auth.json åº”è¯¥åŒ…å« API Key
âœ… Gemini é…ç½®åº”è¯¥å¯ç”¨ IDE
âœ… Gemini .env åº”è¯¥åŒ…å«è®¤è¯ä¿¡æ¯
âœ… OpenCode é…ç½®åº”è¯¥åŒ…å« GMN provider

ğŸ“‹ æµ‹è¯• 2: ç‹¬ç«‹è„šæœ¬ - ä¿æŠ¤æ¨¡å¼ï¼ˆä¿ç•™ç°æœ‰é…ç½®ï¼‰

âœ… Claude åº”è¯¥ä¿ç•™è‡ªå®šä¹‰å­—æ®µ
âœ… Gemini .env åº”è¯¥ä¿ç•™å…¶ä»–å˜é‡
âœ… OpenCode åº”è¯¥ä¿ç•™å…¶ä»– provider

ğŸ“‹ æµ‹è¯• 3: ç‹¬ç«‹è„šæœ¬ - å…¨è¦†ç›–æ¨¡å¼

âš ï¸  å…¨è¦†ç›–æ¨¡å¼éœ€è¦äº¤äº’å¼ç¡®è®¤ï¼Œè·³è¿‡è‡ªåŠ¨æµ‹è¯•
   æ‰‹åŠ¨æµ‹è¯•å‘½ä»¤: node scripts/setup-gmn-standalone.mjs --overwrite

ğŸ“‹ æµ‹è¯• 4: åŸºäº ccman çš„è„šæœ¬

âœ… åŸºäº ccman çš„è„šæœ¬åº”è¯¥æˆåŠŸæ‰§è¡Œ
âœ… åº”è¯¥åˆ›å»º ccman é…ç½®æ–‡ä»¶

============================================================
ğŸ“Š æµ‹è¯•æ€»ç»“
============================================================
âœ… é€šè¿‡: 12
âŒ å¤±è´¥: 0
ğŸ“ æµ‹è¯•ç›®å½•: /var/folders/.../ccman-gmn-test-1769246309969

ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼
âœ… æµ‹è¯•ç›®å½•å·²æ¸…ç†
```
